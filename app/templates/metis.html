<!Doctype html>
<html>
<head>
	<title>Dashboard</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="static/css/bootstrap.min.css" rel="stylesheet" media ="screen">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	<link href="static/css/dc.css" rel="stylesheet" media ="screen">
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/jquery.slick/1.5.9/slick.css"/>
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/jquery.slick/1.5.9/slick-theme.css"/>

    <link href="static/css/owl.carousel.css" rel="stylesheet" media ="screen">
    <link href="static/css/style.css" rel="stylesheet" media ="screen">
	<!--<link href='http://fonts.googleapis.com/css?family=Lato:200,400' rel='stylesheet' type='text/css'>-->
	<style>

    </style>
</head>
<body>
    <div class='nav'>
        <div class='container'>
            <img src='./static/img/sponsorifylogo2.png' id='logo'>
            <ul id='menu'>   
                <li><div class='arrow-down' id='flecha'></div></li>
                <li><a href="{{url_for('home')}}">Metis</a></li>
            </ul>

        </div>
    </div>
    <div id='banner'>
        <div class='container'>
            <div id='featured-meetup'>
               {{data[1]}}
            </div>
        </div>

    </div>
    <div class="container" id="main-container">
        <h3 style='margin-bottom:20px;margin-top:20px'>Top Recommendations</h3>
        <div class="slick-slider" id='general-carousel' >

            <!--{%for group in data %}
                <div class="slick-list" data-id="{{group._id}}"><img class='group-img' src="{{group.group_photo.photo_link}}" ><h4 class='carousel-text'>{{group.name}}</h4></div>-->
                <!--<div class="slick-list" data-id="{{group._id}}" style='background-image: url({{group.group_photo.photo_link}});'><div class='overlay'></div><h4 class='carousel-text'>{{group.name}}</h4></div>
            {%endfor%}-->
        </div>
        <br>
        <br>
        <h3 style='margin-bottom:20px;margin-top:20px'>Top for Tech</h3>
        <div class="slick-slider" id='tech-carousel' ></div>
        <br>
        <br>
        <h3 style='margin-bottom:20px;margin-top:20px'>Top for Business</h3>
        <div class="slick-slider" id='business-carousel'></div>
       
    </div>
     <div id='modal-overlay'>
        <div id='event-modal'>
            <div class='container bordered' style='padding:20px; width:100%; max-height:480px;'>
                <h2 class='modal-title bordered'>This is going to be the title of the event</h2>
                <div class='row bordered'>
                    <div class='col-md-4 bordered'>
                         <img class='modal-image' src="http://photos2.meetupstatic.com/photos/event/4/b/f/9/600_444679449.jpeg"/>
                         
                    </div>
                    <div class='col-md-8 bordered'>
                        
                    </div>
                </div>
               
            </div>
        </div>
    </div>
    <script type="text/javascript" src='static/js/jquery-1.12.2.min.js'> </script>
    <script type="text/javascript" src='static/js/owl.carousel.min.js'> </script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/jquery.slick/1.5.9/slick.min.js"></script>

    <script>
        /*$('#general-carousel').owlCarousel({
            loop:true,
            margin:10,
            nav:true,
            navText:['&#x27;pruebs&#x27;','&#x27;prev&#x27;'],
            responsive:{
                0:{
                    items:1
                },
                600:{
                    items:3
                },
                1000:{
                    items:5
                }
            }
        })
        $('#tech-carousel').owlCarousel({
            loop:true,
            margin:10,
            nav:true,
            navText:['&#x27;pruebs&#x27;','&#x27;prev&#x27;'],
            responsive:{
                0:{
                    items:1
                },
                600:{
                    items:3
                },
                1000:{
                    items:5
                }
            }
        })*/
        $(document).ready(function(){
            $('#tech-carousel').slick({
                infinte:true,
                slidesToShow:5,
                slidesToScroll:5,
                dots:true,
                prevArrow:'<span class="glyphicon glyphicon-chevron-left arrow arrow-left" ></span>',
                nextArrow:'<span class="glyphicon glyphicon-chevron-right arrow arrow-right" ></span>'
            });
            $('#general-carousel').slick({
                infinte:true,
                slidesToShow:5,
                slidesToScroll:5,
                dots:true,
                prevArrow:'<span class="glyphicon glyphicon-chevron-left arrow arrow-left" ></span>',
                nextArrow:'<span class="glyphicon glyphicon-chevron-right arrow arrow-right" ></span>'
            });
            $('#business-carousel').slick({
                infinte:true,
                slidesToShow:5,
                slidesToScroll:5,
                dots:true,
                prevArrow:'<span class="glyphicon glyphicon-chevron-left arrow arrow-left" ></span>',
                nextArrow:'<span class="glyphicon glyphicon-chevron-right arrow arrow-right" ></span>'
            });
        });
        
  
    //Data Handling

        //General Variable
        var data = {{data|safe}};
        var top15_tech;
        var top25_general;
        //Variables for secondary sliders
        var getTop15=function(groups, category_name){
            var top=[];
            for(i=0;i<groups.length;i++){
                if(groups[i].category.name==category_name){
                    top.push(groups[i]);
                }
                //console.log(top10);
            }
            var top15=top.slice(0,15);
            return top15
        }
        var getTop25=function(groups){
            var top = [];
            for(i=0;i<25;i++){
                top.push(groups[i]);
            }
            return top
        }


        top25_general=getTop25(data);
        top15_tech = getTop15(data,'tech');
        top15_business=getTop15(data,'career/business');
        console.log(top15_business)

        for(i=0;i<top25_general.length;i++){
            //console.log(top15_tech[i]);
            //$('#general-carousel').append("<div class='slick-list' data-id='"+top25_general[i]._id+"'><img class='group-img' src="+top25_general[i].group_photo.photo_link+"><h4 class='carousel-text'>"+top25_general[i].name+"</h4></div>");
            $('#general-carousel').append("<div class='slick-list' data-id="+top25_general[i]._id+" style='background-image: url("+top25_general[i].group_photo.photo_link+");'><h4 class='carousel-text'>"+top25_general[i].name+"</h4><h6 class='carousel-text-category'>#"+top25_general[i].category.name+"</h6><div class='overlay'></div></div>");
            
        }

        for(i=0;i<top15_tech.length;i++){
            //console.log(top15_tech[i]);
            //$('#tech-carousel').append("<div class='slick-list' data-id='"+top15_business[i]._id+"'><img class='group-img' src="+top15_tech[i].group_photo.photo_link+"><h4 class='carousel-text'>"+top15_tech[i].name+"</h4></div>");
            $('#tech-carousel').append("<div class='slick-list' data-id="+top15_tech[i]._id+" style='background-image: url("+top15_tech[i].group_photo.photo_link+");'><div class='overlay'></div><h4 class='carousel-text'>"+top15_tech[i].name+"</h4></div>");
        }
        for(i=0;i<top15_business.length;i++){
            //console.log(top15_tech[i]);
            //$('#business-carousel').append("<div class='slick-list' data-id='"+top15_business[i]._id+"'><img class='group-img' src="+top15_business[i].group_photo.photo_link+"><h4 class='carousel-text'>"+top15_business[i].name+"</h4></div>");
            $('#business-carousel').append("<div class='slick-list' data-id="+top15_business[i]._id+" style='background-image: url("+top15_business[i].group_photo.photo_link+");'><div class='overlay'></div><h4 class='carousel-text'>"+top15_business[i].name+"</h4></div>");

        }
        
        //ondivclick
            
            $('.slick-list').click(function(e){
                
                var currentID = $(this).attr('data-id');
                console.log(currentID);
                info = get_event_info(currentID);
                $('#modal-overlay').css('display','block');

                console.log(info);
            });
            $('#modal-overlay').click(function(e){
                $('#modal-overlay').css('display','none');
            });
            
            var get_event_info = function(id){
                console.log(id)
            $.ajax({
                     type: "POST",
                     contentType: "text/plain; charset=utf-8",
                     url: "/event/?id="+id,
                     dataType: "text",
                     async: true,
                     data: id,
                     success: function (res) {
                       console.log(res);
                    },
                    error: function (err) {
                        console.log(err);
                        }
                })
                /*$.post('/event',{
                    data:id

                }).done(function(res){
                    console.log(res);
                }).fail(function(err){
                    console.log(err);
                });*/
        }
        

        



    </script>

</body>
</html>